pu(){ [ -z "$1" ]&&read -ep "URL: " url||url=$1;sudo cat /usr/local/apache/conf/httpd.conf | awk -v url="$url" 'BEGIN{match(url,/((https?):\/\/)?([^:\/]+)(:([0-9]+))?(\/[^?]*)?(\?.*)?$/,u);proto=u[2];host=u[3];port=u[5];uri=u[6];query=u[7];if(!proto){proto="http"};if(!port){if(proto~/https/){port=443}else{port=80}}}match($0,"<VirtualHost ([0-9.]+):"port,vh){ip=vh[1];v=1}/<\/VirtualHost/{v=0}$0~"Server(Alias|Name).*[ ]"host{p=1}p&&v&&/DocumentRoot/{dr=$2;exit}END{if(!dr){print "No docroot found for "host" on "port;exit}if(!uri){uri="/"}file=uri;if(file~"/$"){file=file"index.php"}if(match(dr,/\/home\/([^\/]+)\//,u)){usr=u[1]};print "host=\""host"\"; uri=\""uri query"\"; file=\""dr file"\"; port=\""port"\"; ip=\""ip"\"; proto=\""proto"\"; usr=\""usr"\""}'; }; pu