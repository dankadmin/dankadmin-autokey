dwdump(){ config="${1?No config file}"; dump_path="${2-$PWD}"; db=$(grep "DB_NAME" $config|cut -d\' -f4); usr=$(grep "DB_USER" $config|cut -d\' -f4); pw=$(grep "DB_PASSWORD" $config|cut -d\' -f4); host=$(grep "DB_HOST" $config|cut -d\' -f4); pre=$(grep "table_prefix" $config|cut -d\' -f2); mysqldump -Q --add-drop-table --routines -h${host-localhost} -p"$pw" -u$usr $db > ${dump_path}$db.$(date +%F).sql; };export -f dwdump; find ./ -name wp-config.php -exec bash -c 'dwdump "$0"' {} \;